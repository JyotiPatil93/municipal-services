{"version":3,"sources":["../../src/api/pensionerPensionDiscontinuation.js"],"names":["asyncHandler","require","config","db","api","post","res","next","body","payloads","push","topic","envVariables","KAFKA_TOPICS_PENSIONER_PENSION_DISCONTINUATION","messages","JSON","stringify","producer","send","err","data","response","ResponseInfo","RequestInfo","ProcessInstances","json"],"mappings":";;;;;;;;;;;;;;AAAA;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AAGA;;;;;;AAFA,IAAMA,eAAeC,QAAQ,uBAAR,CAArB;;kBAIe,gBAAoB;AAAA,MAAjBC,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AACjC,MAAIC,MAAM,sBAAV;AACAA,MAAIC,IAAJ,CACE,mCADF,EAEEL;AAAA,yFAAa,wBAAiBM,GAAjB,EAAsBC,IAAtB;AAAA,UAASC,IAAT,SAASA,IAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AACPC,sBADO,GACI,EADJ;AAEX;;;AAFW;AAAA,qBAME,mEAAsDD,IAAtD,CANF;;AAAA;AAMXA,kBANW;;;AASXC,uBAASC,IAAT,CAAc;AACZC,uBAAOC,uBAAaC,8CADR;AAEZC,0BAAUC,KAAKC,SAAL,CAAeR,IAAf;AAFE,eAAd;AAIAS,iCAASC,IAAT,CAAcT,QAAd,EAAwB,UAASU,GAAT,EAAcC,IAAd,EAAoB;AAC1C,oBAAIC,WAAW;AACbC,gCAAc,sCAA0Bd,KAAKe,WAA/B,EAA4C,IAA5C,CADD;AAEbC,oCAAkBhB,KAAKgB;AAFV,iBAAf;AAIAlB,oBAAImB,IAAJ,CAASJ,QAAT;AACD,eAND;;AAbW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAb;;AAAA;AAAA;AAAA;AAAA,MAFF;AAwBA,SAAOjB,GAAP;AACD,C","file":"pensionerPensionDiscontinuation.js","sourcesContent":["import { Router } from \"express\";\nimport producer from \"../kafka/producer\";\nimport { requestInfoToResponseInfo} from \"../utils\";\nimport envVariables from \"../envVariables\";\nimport mdmsData from \"../utils/mdmsData\";\nimport { addUUIDAndAuditDetailsPensionerPensionDiscontinuation } from \"../utils/create\";\nimport set from \"lodash/set\";\nimport get from \"lodash/get\";\nconst asyncHandler = require(\"express-async-handler\");\n\nimport logger from \"../config/logger\";\n\nexport default ({ config, db }) => {\n  let api = Router();\n  api.post(\n    \"/_pensionerPensionDiscontinuation\",\n    asyncHandler(async ({ body }, res, next) => {\n      let payloads = [];\n      //getting mdms data\n      \n         \n      \n      body = await addUUIDAndAuditDetailsPensionerPensionDiscontinuation(body);\n      \n      \n      payloads.push({\n        topic: envVariables.KAFKA_TOPICS_PENSIONER_PENSION_DISCONTINUATION, \n        messages: JSON.stringify(body)\n      });\n      producer.send(payloads, function(err, data) {\n        let response = {\n          ResponseInfo: requestInfoToResponseInfo(body.RequestInfo, true),\n          ProcessInstances: body.ProcessInstances\n        };\n        res.json(response);\n      });\n    })\n  );\n  return api;\n};\n"]}