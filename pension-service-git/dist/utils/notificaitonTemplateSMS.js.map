{"version":3,"sources":["../../src/utils/notificaitonTemplateSMS.js"],"names":["workflowTemplateInterfaceSMS","pension","payload","topic","smsRequest","mobileNumber","employee","user","applicantName","applicationType","applicationNumber","action","envVariables","EGOV_PENSION_RRP_BUSINESS_SERVICE","EGOV_PENSION_WORKFLOW_ACTION_FORWARD","EGOV_PENSION_DOE_BUSINESS_SERVICE","EGOV_PENSION_DOP_BUSINESS_SERVICE","logger","debug","JSON","stringify","messages"],"mappings":";;;;;;AAAA;;;;AACA;;;;AAEA;;;;;;AAEA,IAAMA,+BAA+B,SAA/BA,4BAA+B,GAAkB;AAAA,MAAjBC,OAAiB,uEAAP,EAAO;;AACrD,MAAIC,UAAU,EAAd;AACA,MAAMC,QAAQ,4BAAd;AACA,MAAIC,aAAa;AACfC,kBAAc,mBACZJ,QAAQK,QAAR,CAAiBC,IADL,EAEZ,cAFY;AADC,GAAjB;AAMA,MAAMC,gBAAgB,mBACpBP,QAAQK,QAAR,CAAiBC,IADG,EAEpB,MAFoB,CAAtB;AAIA,MAAME,kBAAkB,mBAAIR,OAAJ,EAAa,iBAAb,CAAxB;AACA,MAAMS,oBAAoB,mBAAIT,OAAJ,EAAa,YAAb,CAA1B;AACA,MAAMU,SAAS,mBAAIV,OAAJ,EAAa,QAAb,CAAf;AACA,UAAQQ,eAAR;AACI,SAAKG,uBAAaC,iCAAlB;AACE,cAAQF,MAAR;AACI,aAAKC,uBAAaE,oCAAlB;AACI;AACIV,uBACE,SADF,cAEYI,aAFZ,qGAEyHE,iBAFzH;AAGD;AACH;AAPR;AASA;AACF,SAAKE,uBAAaG,iCAAlB;AACE,cAAQJ,MAAR;AACE,aAAKC,uBAAaE,oCAAlB;AACI;AACIV,uBACE,SADF,yCAEuCI,aAFvC,kGAEiJE,iBAFjJ;AAGD;AACH;AAPN;AASA;AACJ,SAAKE,uBAAaI,iCAAlB;AACI,cAAQL,MAAR;AACE,aAAKC,uBAAaE,oCAAlB;AACI;AACIV,uBACE,SADF,yCAEuCI,aAFvC,kGAEiJE,iBAFjJ;AAGD;AACH;AAPN;AASA;AAjCN;AAmCAO,mBAAOC,KAAP,CAAa,YAAb,EAA0BC,KAAKC,SAAL,CAAehB,UAAf,CAA1B;;AAEAF,YAAU;AACRC,gBADQ;AAERkB,cAAUF,KAAKC,SAAL,CAAehB,UAAf;AAFF,GAAV;AAIA,SAAOF,OAAP;AACD,CA1DD;;kBA4DeF,4B","file":"notificaitonTemplateSMS.js","sourcesContent":["import get from \"lodash/get\";\nimport envVariables from \"../envVariables\";\n\nimport logger from \"../config/logger\";\n\nconst workflowTemplateInterfaceSMS = (pension = {}) => {\n  let payload = {};\n  const topic = \"egov.core.notification.sms\";\n  let smsRequest = {\n    mobileNumber: get(\n      pension.employee.user,\n      \"mobileNumber\"\n    )\n  };\n  const applicantName = get(\n    pension.employee.user,\n    \"name\"\n  );\n  const applicationType = get(pension, \"businessService\");\n  const applicationNumber = get(pension, \"businessId\");\n  const action = get(pension, \"action\");\n  switch (applicationType) {\n      case envVariables.EGOV_PENSION_RRP_BUSINESS_SERVICE:\n        switch (action) {\n            case envVariables.EGOV_PENSION_WORKFLOW_ACTION_FORWARD:\n                {\n                    smsRequest[\n                      \"message\"\n                    ] = `Dear ${applicantName}, Your Regular Retirement Pension application has been initiated. Your application number is ${applicationNumber}.`;\n                  }\n                break;                \n        }\n        break;\n      case envVariables.EGOV_PENSION_DOE_BUSINESS_SERVICE:\n        switch (action) {\n          case envVariables.EGOV_PENSION_WORKFLOW_ACTION_FORWARD:\n              {\n                  smsRequest[\n                    \"message\"\n                  ] = `This is to inform dependents of ${applicantName} that the application of death benefit has been initiated. Please note application number ${applicationNumber} for future reference.`;\n                }\n              break;                \n        }\n        break;\n    case envVariables.EGOV_PENSION_DOP_BUSINESS_SERVICE:\n        switch (action) {\n          case envVariables.EGOV_PENSION_WORKFLOW_ACTION_FORWARD:\n              {\n                  smsRequest[\n                    \"message\"\n                  ] = `This is to inform dependents of ${applicantName} that the application of death benefit has been initiated. Please note application number ${applicationNumber} for future reference.`;\n                }\n              break;                \n        }\n        break;\n  }\n  logger.debug(\"smsRequest\",JSON.stringify(smsRequest));\n  \n  payload = {\n    topic,\n    messages: JSON.stringify(smsRequest)\n  };\n  return payload;\n};\n\nexport default workflowTemplateInterfaceSMS;\n"]}